<div class="layout" [class.no-sidebar]="!sidebarOpen()">
  <app-sidebar *ngIf="sidebarOpen()"></app-sidebar>
  <section class="content">
    <header class="topbar">
      <button class="menu" (click)="toggleSidebar()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <h1>Dashboard</h1>
      <div class="actions">
        <button class="action-btn" (click)="notifyClick()">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3a6 6 0 0 1 6 6v3.586l1.707 1.707A1 1 0 0 1 19.586 16H4.414a1 1 0 0 1-.707-1.707L5.414 12.586V9a6 6 0 0 1 6-6Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9 18a3 3 0 0 0 6 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </header>

    <div class="cards">
      <app-info-card 
        title="Total de Contas na Carteira" 
        [value]="totalContasDoGerente()" 
        iconClass="icon-list"
        actionTooltip="Ver listagem"
        [isPositive]="true"
        (action)="onWalletCardAction()">
      </app-info-card>

      <app-info-card 
        title="Taxa de Conversão" 
        value="68.4%" 
        trend="+5.2%" 
        description="from target"
        iconClass="icon-target"
        [isPositive]="true"
        (action)="onConversionCardAction()">
      </app-info-card>

      <app-info-card 
        title="Gap de Produtos" 
        value="342" 
        trend="Clientes sem cartão/PIX"
        description=""
        iconClass="icon-card"
        [isPositive]="false"
        (action)="onGapCardAction()">
      </app-info-card>

      <app-info-card 
        title="Tarefas Pendentes" 
        value="23" 
        trend="Vencendo hoje"
        description=""
        iconClass="icon-check"
        [isPositive]="false"
        (action)="onTasksCardAction()">
      </app-info-card>
    </div>

    <div class="panel performance" *ngIf="!showContasTable()">
      <h2>Performance de Vendas</h2>
      <p>Receita mensal vs Meta</p>
    </div>

    <app-paginated-table 
      *ngIf="showContasTable()"
      title="Contas do Gerente"
      [rows]="contas()"
      [columns]="contasColumns"
      [pageSize]="10"
      (close)="closeContasTable()"
    ></app-paginated-table>
  </section>
</div>
