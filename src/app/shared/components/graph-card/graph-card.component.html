<div class="graph-card">
  <div class="header">
    <span class="title">{{ title }}</span>
  </div>
  <div class="content" *ngIf="type === 'pie'">
    <svg width="160" height="160" viewBox="0 0 160 160" aria-hidden="true">
      <g>
        <circle *ngFor="let v of values; let i = index; trackBy: trackItem"
                [attr.cx]="cx" [attr.cy]="cy" [attr.r]="radius"
                fill="none"
                [attr.stroke]="colors[i % colors.length]"
                [attr.stroke-width]="thickness"
                stroke-linecap="butt"
                [attr.pointer-events]="'visibleStroke'"
                style="cursor: pointer;"
                [attr.stroke-dasharray]="segmentDashArray(i)"
                [attr.stroke-dashoffset]="segmentDashOffset(i)"
                [attr.transform]="'rotate(-90 ' + cx + ' ' + cy + ')'"
                (click)="onSegmentClick(i)" />
      </g>
      <circle [attr.cx]="cx" [attr.cy]="cy" [attr.r]="radius - thickness/2" fill="#fff" pointer-events="none"></circle>
    </svg>
    <div class="legend">
      <div class="item" *ngFor="let lbl of labels; let i = index">
        <span class="dot" [style.background]="colors[i % colors.length]"></span>
        <span class="text">{{ lbl }}</span>
        <button type="button" class="val-btn" (click)="onLegendButtonClick(i)" [style.color]="colors[i % colors.length]">
          <svg class="val-icon" width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M4 6h14M4 12h14M4 18h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="val" *ngIf="dataType === 'percent'">{{ percent(i) }}%</span>
          <span class="val" *ngIf="dataType === 'absolute'">{{ values[i] }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
