<div class="panel main-table">
  <div class="table-head">
    <div class="head-titles">
      <h2>{{ title }}</h2>
      <div class="subtitle-row">
        <div class="subtitle">
          {{ subtitle }}
        </div>
      </div>
    </div>
    <div class="head-btn-actions">
      <button class="close-btn" (click)="closeClick()" aria-label="Fechar" *ngIf="btnClose">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <button *ngIf="btnAddNew != null" class="new-btn" (click)="onAddNew()">NOVO</button>
    </div>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th *ngFor="let col of columns; trackBy: trackCol">{{ col.header }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of displayedRows(); trackBy: trackRow">
        <td *ngFor="let col of columns; trackBy: trackCol" [ngClass]="col.cellClass ? col.cellClass(row) : null">
          <ng-container [ngSwitch]="col.format || 'text'">
            <span *ngSwitchCase="'currency'">
              {{ getValue(row, col) | currency:(col.currencyCode || 'BRL'):'symbol':(col.digitsInfo || '1.2-2'):(col.locale || 'pt-BR') }}
            </span>
            <span *ngSwitchCase="'date'">
              {{ getValue(row, col) | date:(col.digitsInfo || 'short'):(col.locale || 'pt-BR') }}
            </span>
            <span *ngSwitchDefault>
              {{ getValue(row, col) }}
            </span>
          </ng-container>
        </td>
      </tr>
      <tr *ngIf="displayedRows().length === 0">
        <td [attr.colspan]="columns.length" style="color: var(--brown-700); opacity: 0.7; padding: 0.75rem;">
          Sem dados
        </td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <button class="page-btn" (click)="prevPage()" [disabled]="effectivePage() === 0">Anterior</button>
    <span class="page-info">Página {{ effectivePage() + 1 }} de {{ effectiveTotalPages() }}</span>
    <button class="page-btn" (click)="nextPageListaContasTotal()" [disabled]="effectivePage() >= effectiveTotalPages() - 1">Próxima</button>
  </div>
</div>
